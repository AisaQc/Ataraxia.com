<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Tienda Ataraxia</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100 text-gray-900">
  <div class="container mx-auto p-4">
    <h1 class="text-4xl font-bold mb-4 text-center">Tienda Ataraxia</h1>

    <!-- Búsqueda y filtros -->
    <div class="flex flex-wrap gap-4 justify-center mb-6">
      <input id="searchInput" type="text" placeholder="Buscar por nombre o características" class="border px-4 py-2 rounded w-full max-w-md" />
      <select id="filterType" class="border px-4 py-2 rounded">
        <option value="">Todos</option>
        <option value="Vinilo">Vinilos</option>
        <option value="CD">CDs</option>
        <option value="Cassette">Cassettes</option>
      </select>
    </div>

    <!-- Lista de productos -->
    <div id="productList" class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-6"></div>

    <!-- Carrito -->
    <div class="fixed bottom-0 right-0 bg-white shadow-lg p-4 w-full max-w-sm border-t">
      <h2 class="text-xl font-semibold mb-2">Carrito</h2>
      <ul id="cartItems" class="mb-2"></ul>
      <p class="font-bold">Total: S/ <span id="cartTotal">0.00</span></p>
      <div class="mt-3 space-x-2">
        <button class="bg-purple-600 text-white px-4 py-2 rounded">Pagar con Yape</button>
        <button class="bg-blue-600 text-white px-4 py-2 rounded">Pagar con PayPal</button>
      </div>
    </div>
  </div>

  <script>
    const products = [
      { name: 'Disco Ataraxia Vol.1', type: 'Vinilo', price: 80, description: 'Edición limitada color púrpura' },
      { name: 'CD Antología', type: 'CD', price: 40, description: 'Incluye bonus track', options: ['Edición normal', 'Edición deluxe'] },
      { name: 'Cassette Retro 90s', type: 'Cassette', price: 25, description: 'Vintage para coleccionistas' },
      { name: 'CD Remixes', type: 'CD', price: 35, description: 'Remixes exclusivos de artistas independientes' },
      { name: 'Vinilo Oscuro', type: 'Vinilo', price: 90, description: 'Prensado en vinilo negro de 180gr' }
    ];

    const cart = [];

    function renderProducts() {
      const list = document.getElementById('productList');
      const search = document.getElementById('searchInput').value.toLowerCase();
      const filter = document.getElementById('filterType').value;

      list.innerHTML = '';

      products.filter(p => {
        return (
          (p.name.toLowerCase().includes(search) || p.description.toLowerCase().includes(search)) &&
          (filter === '' || p.type === filter)
        );
      }).forEach((product, i) => {
        const div = document.createElement('div');
        div.className = 'bg-white p-4 rounded shadow';

        let html = `<h3 class="text-xl font-bold">${product.name}</h3>
          <p class="text-sm text-gray-600">${product.type}</p>
          <p class="my-2">${product.description}</p>
          <p class="font-semibold">S/ ${product.price.toFixed(2)}</p>`;

        if (product.options) {
          html += `<select id="opt-${i}" class="my-2 w-full border rounded px-2 py-1">`;
          product.options.forEach(opt => {
            html += `<option value="${opt}">${opt}</option>`;
          });
          html += `</select>`;
        }

        html += `<button onclick="addToCart(${i})" class="mt-2 bg-green-600 text-white px-4 py-2 rounded w-full">Agregar al carrito</button>`;

        div.innerHTML = html;
        list.appendChild(div);
      });
    }

    function addToCart(index) {
      const product = products[index];
      const selectedOption = product.options ? document.getElementById(`opt-${index}`).value : null;
      const name = selectedOption ? `${product.name} - ${selectedOption}` : product.name;

      cart.push({ name, price: product.price });
      updateCart();
    }

    function updateCart() {
      const cartList = document.getElementById('cartItems');
      cartList.innerHTML = '';
      let total = 0;

      cart.forEach(item => {
        const li = document.createElement('li');
        li.textContent = `${item.name} - S/ ${item.price.toFixed(2)}`;
        cartList.appendChild(li);
        total += item.price;
      });

      document.getElementById('cartTotal').textContent = total.toFixed(2);
    }

    document.getElementById('searchInput').addEventListener('input', renderProducts);
    document.getElementById('filterType').addEventListener('change', renderProducts);

    renderProducts();
  </script>
</body>
</html>
